<UserControl x:Class="Phoenix.UI.WPF.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Phoenix.UI.WPF.Views"
             xmlns:models="clr-namespace:Phoenix.Core.Models;assembly=Phoenix.Core"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             Loaded="UserControl_Loaded">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="24" MaxWidth="600">
            <!-- Header -->
            <Grid Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <Button Grid.Column="0" Content="â† Back" 
                        Command="{Binding GoBackCommand}"
                        Style="{StaticResource IconButtonStyle}"
                        Padding="12,6"/>
                
                <TextBlock Grid.Column="1" Text="Settings" 
                           FontSize="28" FontWeight="Bold"
                           VerticalAlignment="Center" Margin="16,0,0,0"
                           Foreground="{StaticResource TextPrimaryBrush}"/>
            </Grid>
            
            <!-- Appearance Section -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Appearance" 
                               FontSize="16" FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               Margin="0,0,0,16"/>
                    
                    <!-- Theme -->
                    <TextBlock Text="Theme" FontWeight="Medium" Margin="0,0,0,8"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                        <RadioButton Content="Default" GroupName="Theme"
                                     IsChecked="{Binding Settings.Theme, Converter={StaticResource EnumBoolConverter}, ConverterParameter={x:Static models:ReaderTheme.Default}}"
                                     Checked="ThemeRadioButton_Checked"
                                     Margin="0,0,16,0"/>
                        <RadioButton Content="Dark" GroupName="Theme"
                                     IsChecked="{Binding Settings.Theme, Converter={StaticResource EnumBoolConverter}, ConverterParameter={x:Static models:ReaderTheme.Dark}}"
                                     Checked="ThemeRadioButton_Checked"
                                     Margin="0,0,16,0"/>
                        <RadioButton Content="Sepia" GroupName="Theme"
                                     IsChecked="{Binding Settings.Theme, Converter={StaticResource EnumBoolConverter}, ConverterParameter={x:Static models:ReaderTheme.Sepia}}"
                                     Checked="ThemeRadioButton_Checked"/>
                    </StackPanel>
                    
                    <!-- Font Family -->
                    <TextBlock Text="Font Family" FontWeight="Medium" Margin="0,0,0,8"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <ComboBox ItemsSource="{Binding AvailableFonts}"
                              SelectedItem="{Binding Settings.FontFamily, Mode=TwoWay}"
                              SelectionChanged="SettingsComboBox_SelectionChanged"
                              Width="200" HorizontalAlignment="Left"
                              Margin="0,0,0,16"/>
                    
                    <!-- Font Size -->
                    <TextBlock Text="Font Size" FontWeight="Medium" Margin="0,0,0,8"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                        <ComboBox ItemsSource="{Binding AvailableFontSizes}"
                                  SelectedItem="{Binding Settings.FontSize, Mode=TwoWay}"
                                  SelectionChanged="SettingsComboBox_SelectionChanged"
                                  Width="100"/>
                        <TextBlock Text="px" VerticalAlignment="Center" Margin="8,0,0,0"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                    
                    <!-- Line Height -->
                    <TextBlock Text="Line Height" FontWeight="Medium" Margin="0,0,0,8"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <ComboBox ItemsSource="{Binding AvailableLineHeights}"
                              SelectedItem="{Binding Settings.LineHeight, Mode=TwoWay}"
                              SelectionChanged="SettingsComboBox_SelectionChanged"
                              Width="100" HorizontalAlignment="Left"
                              Margin="0,0,0,16"/>
                    
                    <!-- Margin Size -->
                    <TextBlock Text="Page Margins" FontWeight="Medium" Margin="0,0,0,8"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <StackPanel Orientation="Horizontal">
                        <ComboBox ItemsSource="{Binding AvailableMargins}"
                                  SelectedItem="{Binding Settings.MarginSize, Mode=TwoWay}"
                                  SelectionChanged="SettingsComboBox_SelectionChanged"
                                  Width="100"/>
                        <TextBlock Text="px" VerticalAlignment="Center" Margin="8,0,0,0"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Reading Section -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Reading" 
                               FontSize="16" FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               Margin="0,0,0,16"/>
                    
                    <CheckBox Content="Remember reading position"
                              IsChecked="{Binding Settings.RememberPosition, Mode=TwoWay}"
                              Checked="SettingsCheckBox_Changed"
                              Unchecked="SettingsCheckBox_Changed"
                              Margin="0,0,0,12"/>
                    
                    <CheckBox Content="Show sidebar by default"
                              IsChecked="{Binding Settings.SidebarVisible, Mode=TwoWay}"
                              Checked="SettingsCheckBox_Changed"
                              Unchecked="SettingsCheckBox_Changed"/>
                </StackPanel>
            </Border>
            
            <!-- Advanced Section -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Advanced" 
                               FontSize="16" FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               Margin="0,0,0,16"/>
                    
                    <CheckBox Content="Enable debug mode"
                              IsChecked="{Binding Settings.DebugModeEnabled, Mode=TwoWay}"
                              Checked="SettingsCheckBox_Changed"
                              Unchecked="SettingsCheckBox_Changed"
                              Margin="0,0,0,8"/>
                    <TextBlock Text="Shows debugging tools in the reader toolbar for troubleshooting highlights and other features."
                               FontSize="11"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               TextWrapping="Wrap"
                               Margin="20,0,0,0"/>
                </StackPanel>
            </Border>
            
            <!-- Actions -->
            <Button Content="Reset to Defaults" 
                    Command="{Binding ResetSettingsCommand}"
                    Style="{StaticResource IconButtonStyle}"
                    HorizontalAlignment="Right"
                    Padding="16,8"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>
